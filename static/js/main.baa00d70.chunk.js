(this["webpackJsonpreact-cycle"]=this["webpackJsonpreact-cycle"]||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),c=a(15),i=a(19),s=a(4),u=a(18),m=a(28);var d=[];function p(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_UPCOMING_MOVIES":return!0;case"RECEIVED_UPCOMING_MOVIES":return!1;default:return e}}var E={};var v=[];var h=Object(u.c)({token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_TOKEN":return t.payload.token;case"REQUESTED_TOKEN":default:return e}},popularMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_POPULAR_MOVIES":return e;case"RECEIVED_POPULAR_MOVIES":return t.payload.movies;default:return e}},popularMoviesLoading:p,upcomingMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_UPCOMING_MOVIES":return e;case"RECEIVED_UPCOMING_MOVIES":return t.payload.movies;default:return e}},upcomingMoviesLoading:p,searchResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_MOVIES":return t.payload.movies;case"CLEARED_SEARCH_RESULTS":return d;default:return e}},showMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DESELECT_MOVIE":case"HIDE_MOVIE":return!1;case"SELECT_MOVIE":case"SHOW_MOVIE":return!0;default:return e}},selectMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_MOVIE":case"SELECT_MOVIE":return t.payload.movie;case"DESELECT_MOVIE":return E;default:return e}},nowPlaying:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_NOW_PLAYING":return t.payload.movies;case"REQUESTED_NOW_PLAYING":default:return e}},cast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_CAST":return t.payload.cast;case"DESELECT_MOVIE":return v;default:return e}}}),f=a(59);function g(e){return{type:"RECEIVED_TOKEN",payload:{token:e}}}function y(e){return{type:"RECEIVED_MOVIES",payload:{movies:e}}}function O(){return{type:"CLEARED_SEARCH_RESULTS"}}function b(e){return{type:"SELECT_MOVIE",payload:{movie:e}}}var _=a(30),N=a.n(_),C={invoke:function(e,t,a){N.a.set(e,JSON.stringify(t),a)},retrieve:function(e){var t=N.a.get(e);return void 0!==t&&JSON.parse(t)},revoke:function(e){N.a.remove(e)}},T=a(1),M=a.n(T);function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(f.a)({api_key:"1e859dc9f92ec822aa44af583dfc67fc"},t);return"https://api.themoviedb.org/3/"+e+"?"+Object.keys(a).map((function(e){return e+"="+a[e]})).join("&")}function I(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=C.retrieve("TMDb"),r=n.request_token;return{url:S(t,a),headers:{Authorization:"Bearer "+r,"Content-Type":"application/json;charset=utf-8"},method:"GET",category:e}}var k=Object(m.combineCycles)((function(e){var t=C.retrieve("TMDb");if(t)return{ACTION:e.ACTION.filter((function(e){return"REQUESTED_TOKEN"===e.type})).map((function(e){return g(t.request_token)}))};var a=e.ACTION.filter((function(e){return"REQUESTED_TOKEN"===e.type})),n=a.map((function(e){return{url:S("authentication/token/new",{api_key:"1e859dc9f92ec822aa44af583dfc67fc"}),category:"token"}})),r=e.HTTP.select("token").flatten();return{ACTION:M.a.combine(r,a).map((function(e){var t=e[0].body;return C.invoke("TMDb",t,{expires:1}),g(t.request_token)})),HTTP:n}}),(function(e){var t={"release_date.gte":"2019-01-01","release_date.lte":"2020-01-01",sort_by:"popularity.desc"},a=e.ACTION.filter((function(e){return"RECEIVED_TOKEN"===e.type})),n=a.map((function(e){return I("popular","discover/movie",t)})),r=e.HTTP.select("popular").flatten();return{ACTION:M.a.combine(r,a).map((function(e){return{type:"RECEIVED_POPULAR_MOVIES",payload:{movies:e[0].body.results}}})),HTTP:n}}),(function(e){var t=e.ACTION.filter((function(e){return"RECEIVED_TOKEN"===e.type})),a=t.map((function(e){return I("upcoming","movie/upcoming")})),n=e.HTTP.select("upcoming").flatten();return{ACTION:M.a.combine(n,t).map((function(e){return{type:"RECEIVED_UPCOMING_MOVIES",payload:{movies:e[0].body.results}}})),HTTP:a}}),(function(e){return{ACTION:e.ACTION.filter((function(e){return"SEARCH_MOVIES"===e.type})).filter((function(e){return!e.payload.query})).map(O)}}),(function(e){var t=e.ACTION.filter((function(e){return"SEARCH_MOVIES"===e.type})).map((function(e){return e.payload.query})).filter((function(e){return!!e})).map((function(t){return e.Time.periodic(800).take(1).mapTo(t).endWhen(e.ACTION.filter((function(e){return"CLEARED_SEARCH_RESULTS"===e.type})))})).flatten().map((function(e){return I("search","search/movie",{query:e})}));return{ACTION:e.HTTP.select("search").flatten().map((function(e){return e.body.results})).map(y),HTTP:t}}),(function(e){var t=e.ACTION.filter((function(e){return"SELECT_MOVIE"===e.type})),a=t.map((function(e){return I("movie_details","movie/"+e.payload.movie.id,{append_to_response:"videos,release_dates"})})),n=e.HTTP.select("movie_details").flatten();return{ACTION:M.a.combine(n,t).map((function(e){return{type:"RECEIVED_MOVIE",payload:{movie:e[0].body}}})),HTTP:a}}),(function(e){var t=e.ACTION.filter((function(e){return"REQUESTED_NOW_PLAYING"===e.type})),a=t.map((function(e){return I("now_playing","movie/now_playing")})),n=e.HTTP.select("now_playing").flatten();return{ACTION:M.a.combine(n,t).map((function(e){return{type:"RECEIVED_NOW_PLAYING",payload:{movies:e[0].body.results}}})),HTTP:a}}),(function(e){var t=e.ACTION.filter((function(e){return"SELECT_MOVIE"===e.type})),a=t.map((function(e){return I("cast","movie/".concat(e.payload.movie.id,"/casts"))})),n=e.HTTP.select("cast").flatten();return{ACTION:M.a.combine(n,t).map((function(e){return{type:"RECEIVED_CAST",payload:{cast:e[0].body.cast}}})),HTTP:a}})),w=a(58),D=a(57),R=a(55);a(95);function j(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg"},r.a.createElement("a",{href:"#",className:"navbar-brand"},"MoFlix"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(i.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/now-playing"},"Now Playing")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/popular"},"Popular"))))))}a(97);function P(){return r.a.createElement("footer",{className:"footer p-3"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"text-muted"},"created by Farzad Slamdien @ 2019")))}var A=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),t,r.a.createElement(P,null))},V=a(13),L=a(14),H=a(5),U=a(17),q=a(16),x=a(51),W=function(e){Object(U.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).el=void 0,n.MODAL_NODE=void 0,n.handleDeselectMovie=n.handleDeselectMovie.bind(Object(H.a)(n)),n.handleShowModal=n.handleShowModal.bind(Object(H.a)(n)),n.handleChildClick=n.handleChildClick.bind(Object(H.a)(n)),n.MODAL_NODE=document.getElementById("modal"),n.el=document.createElement("div"),n}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e;null===(e=this.MODAL_NODE)||void 0===e||e.addEventListener("click",this.handleDeselectMovie),this.el.addEventListener("click",this.handleChildClick),this.handleShowModal(),this.MODAL_NODE.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.MODAL_NODE)||void 0===e||e.removeEventListener("click",this.handleDeselectMovie),this.el.removeEventListener("click",this.handleChildClick),this.handleShowModal(),this.MODAL_NODE.removeChild(this.el)}},{key:"handleShowModal",value:function(){var e=this;["d-none","modal--open","show"].map((function(t){var a;return null===(a=e.MODAL_NODE)||void 0===a?void 0:a.classList.toggle(t)}))}},{key:"handleDeselectMovie",value:function(){this.props.deselectMovie()}},{key:"handleChildClick",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return Object(x.a)(this.props),o.a.createPortal(this.props.children,this.el)}}]),a}(r.a.Component),G=Object(c.b)((function(){return{}}),{deselectMovie:function(){return{type:"DESELECT_MOVIE"}}})(W),Q=a(52),K=a.n(Q);function F(e){e.value;var t=e.defaultValue,a=e.onChange;return r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",defaultValue:t,onChange:function(e){return a(e.target.value)}})}var Y=function(e){Object(U.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(H.a)(n)),n.state={query:""},n}return Object(L.a)(a,[{key:"handleChange",value:function(e){var t=this;this.setState({query:e},(function(){return t.props.searchMovies(e)}))}},{key:"render",value:function(){var e=this.state.query,t=this.props.searchResults,a=["search__results"];e||a.push("search__results--collapsed");var n=r.a.createElement("div",{className:"card"},r.a.createElement("ul",{className:"list-group list-group-flush"},e&&t.length<1?r.a.createElement("li",{className:"list-group-item"},"Loading ..."):null,t?t.map((function(e){return r.a.createElement("li",{className:"list-group-item p-0"},r.a.createElement("img",{src:e.poster_path?"https://image.tmdb.org/t/p/w200".concat(e.poster_path):K.a,className:"card-img-top search__poster mr-3",alt:"Poster for ".concat(e.title)}),e.title)})):null));return r.a.createElement("div",{className:"search__container"},r.a.createElement(F,{onChange:this.handleChange,defaultValue:e,value:""}),r.a.createElement("div",{className:a.join(" ")},n))}}]),a}(n.PureComponent),B=Object(c.b)((function(e){return{searchResults:e.searchResults}}),{searchMovies:function(e){return{type:"SEARCH_MOVIES",payload:{query:e}}}})(Y);function J(e){var t=e.collection,a=e.loading,n=e.onClick;return r.a.createElement("div",{style:{opacity:a?.3:1},className:"scaffold scaffold--horizontal-scroll"},r.a.createElement("div",{className:"row"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"card outline-0 col-2 ml-1 mr-1 mb-2 p-0",onClick:function(){return n(e)}},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(e.poster_path),className:"card-img-top",alt:"Poster for ".concat(e.title)}),r.a.createElement("div",{className:"card-body p-1"},r.a.createElement("h5",{className:"card-title text-left text-wrap"},e.title),r.a.createElement("p",{className:"card-text text-muted text-left"},e.release_date)))}))))}var z=a(56),X=a(53),$=a.n(X);function Z(e){var t=Object(n.useState)("https://image.tmdb.org/t/p/w300/"+e.profile_path),a=Object(z.a)(t,2),l=a[0],o=a[1],c="Profile image of "+e.name;return r.a.createElement("div",{className:"avatar ml-1 mr-1 mb-2"},r.a.createElement("a",{href:"#","data-tooltip":e.name,"data-placement":"top"},r.a.createElement("img",{src:l,alt:c,onError:function(){return o($.a)}})))}var ee=a(54),te=a.n(ee),ae=function(e){Object(U.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={key:"overview"},n.handleTabChange=n.handleTabChange.bind(Object(H.a)(n)),n}return Object(L.a)(a,[{key:"componentDidMount",value:function(){document.documentElement.style.setProperty("--selected-movie-backdrop","url(https://image.tmdb.org/t/p/w500/"+this.props.backdrop_path+")")}},{key:"componentWillUnmount",value:function(){document.documentElement.style.setProperty("--selected-movie-backdrop","")}},{key:"handleTabChange",value:function(e){console.log("handle tab",e),this.setState({key:e})}},{key:"render",value:function(){var e=this.props,t=e.poster_path,a=e.genres,n=e.overview,l=e.cast,o=e.videos,c=e.release_dates,i=(this.state.key,"https://image.tmdb.org/t/p/w300/"+t),s="Cover Art for "+t,u="n/a";c&&(u=c.results[0].release_dates[0].certification);var m=a?a.map((function(e){return r.a.createElement("span",{key:e.id,className:"badge badge-pill badge-light"},e.name)})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"modal__container"},r.a.createElement("img",{className:"poster poster--small",src:i,alt:s}),r.a.createElement("article",{className:"modal__hero"},r.a.createElement("h2",{className:"modal__title offset-sm-4 col d-flex align-items-center"},this.props.title,r.a.createElement("span",{className:"badge badge-pill badge-warning u-text--small ml-3"},u)),r.a.createElement("div",{className:"modal__rating"},"ratings")),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("article",{className:"col modal__genres"},m),r.a.createElement("article",{className:"col-8 modal__details"},r.a.createElement("h5",{className:"detail-heading"},"Overview"),r.a.createElement("p",null,n),r.a.createElement("h5",{className:"detail-heading"},"Cast"),r.a.createElement("div",{className:"row"},l?l.map((function(e){return r.a.createElement(Z,e)})):null),r.a.createElement("h5",{className:"detail-heading"},"Trailers"),o?o.results.map((function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col mb-1"},r.a.createElement(te.a,{url:"https://www.youtube.com/watch?v=".concat(e.key),width:"490px"})))})):null)))))}}]),a}(n.Component),ne=function(e){Object(U.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).handleMovieSelect=n.handleMovieSelect.bind(Object(H.a)(n)),n.handleSearchChange=n.handleSearchChange.bind(Object(H.a)(n)),e.requestToken(),n}return Object(L.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.query!==e.query&&this.handleSearchChange(e.query)}},{key:"handleMovieSelect",value:function(e){this.props.selectMovie(e)}},{key:"handleSearchChange",value:function(e){this.props.searchMovies(e)}},{key:"render",value:function(){var e=this.props,t=e.upcomingResults,a=e.upcomingLoading,n=e.popularResults,l=e.popularMoviesLoading,o=e.showModal,c=e.selectedMovie,i=e.cast,s=o?r.a.createElement(G,null,r.a.createElement(ae,Object.assign({},c,{cast:i}))):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"jumbotron mb-5"},r.a.createElement(B,null)),r.a.createElement("section",{className:"container mb-5"},r.a.createElement("h4",{className:"section__heading"},"Upcoming Movies"),r.a.createElement(J,{collection:t,loading:a,onClick:this.handleMovieSelect})),r.a.createElement("section",{className:"container"},r.a.createElement("h4",{className:"section__heading"},"top rated movies"),r.a.createElement(J,{collection:n,loading:l,onClick:this.handleMovieSelect})),s)}}]),a}(n.Component),re=Object(c.b)((function(e){return{upcomingResults:e.upcomingMovies,upcomingLoading:e.upcomingLoading,popularResults:e.popularMovies,popularMoviesLoading:e.popularMoviesLoading,showModal:e.showMovie,selectedMovie:e.selectMovie,cast:e.cast}}),{requestToken:function(){return{type:"REQUESTED_TOKEN"}},selectMovie:b})(ne);function le(){return r.a.createElement("div",null,"loading")}var oe=function(e){Object(U.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).handleMovieSelect=n.handleMovieSelect.bind(Object(H.a)(n)),n}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.requestNowPlaying()}},{key:"handleMovieSelect",value:function(e){this.props.selectMovie(e)}},{key:"render",value:function(){var e=this.props,t=e.nowPlaying,a=e.selectedMovie,n=e.showModal,l=e.cast,o=0!=t.length?r.a.createElement(J,{collection:t,onClick:this.handleMovieSelect,loading:!1}):r.a.createElement(le,null),c=n?r.a.createElement(G,null,r.a.createElement(ae,Object.assign({},a,{cast:l}))):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"jumbotron mb-5"},r.a.createElement(B,null)),r.a.createElement("section",{className:"container mb-5"},r.a.createElement("h4",{className:"section__heading"},"Now Playing"),o),c)}}]),a}(n.Component),ce=Object(c.b)((function(e){var t=e.nowPlaying,a=e.selectMovie;return{nowPlaying:t,showModal:e.showMovie,selectedMovie:a,cast:e.cast}}),{requestNowPlaying:function(){return{type:"REQUESTED_NOW_PLAYING"}},selectMovie:b})(oe);function ie(){return r.a.createElement("section",{className:"four-oh-four"},r.a.createElement("h2",{className:"four-oh-four__message"},"The page you were looking for could not be found."),r.a.createElement("h1",{className:"four-oh-four__code"},"four oh four"),r.a.createElement("p",{className:"four-oh-four__actions"},"Please go home  ",r.a.createElement(i.b,{className:"nav-link",to:"/"},"Home")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=function(){var e=Object(m.createCycleMiddleware)(),t=e.makeActionDriver,a=e.makeStateDriver,n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,r=[e],l=[u.a.apply(void 0,r)],o=Object(u.e)(h,n.apply(void 0,l));return Object(w.a)(k,{ACTION:t(),STATE:a(),Time:R.a,HTTP:Object(D.a)()}),o}(),ue=document.getElementById("root");o.a.render(r.a.createElement(c.a,{store:se},r.a.createElement(i.a,{basename:"".concat("/react-cyclejs","/")},r.a.createElement(A,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(re,null)),r.a.createElement(s.a,{path:"/now-playing"},r.a.createElement(ce,null)),r.a.createElement(s.a,{path:"*"},r.a.createElement(ie,null)))))),ue),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,a){e.exports=a.p+"static/media/film-poster-placeholder.d1b4253f.png"},53:function(e,t,a){e.exports=a.p+"static/media/profile.8beb1160.png"},60:function(e,t,a){e.exports=a(115)},95:function(e,t,a){},97:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.baa00d70.chunk.js.map