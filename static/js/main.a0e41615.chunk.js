(this["webpackJsonpreact-cycle"]=this["webpackJsonpreact-cycle"]||[]).push([[0],{46:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},52:function(e,t,a){e.exports=a(90)},87:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),c=a(13),i=a(21),s=a(4),u=a(16),m=a(26);var d=[];function E(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_UPCOMING_MOVIES":return!0;case"RECEIVED_UPCOMING_MOVIES":return!1;default:return e}}var p={};var v=Object(u.c)({token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_TOKEN":return t.payload.token;case"REQUESTED_TOKEN":default:return e}},popularMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_POPULAR_MOVIES":return e;case"RECEIVED_POPULAR_MOVIES":return t.payload.movies;default:return e}},popularMoviesLoading:E,upcomingMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_UPCOMING_MOVIES":return e;case"RECEIVED_UPCOMING_MOVIES":return t.payload.movies;default:return e}},upcomingMoviesLoading:E,searchResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_MOVIES":return t.payload.movies;case"CLEARED_SEARCH_RESULTS":return d;default:return e}},showMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DESELECT_MOVIE":case"HIDE_MOVIE":return!1;case"SELECT_MOVIE":case"SHOW_MOVIE":return!0;default:return e}},selectMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_MOVIE":case"SELECT_MOVIE":return t.payload.movie;case"DESELECT_MOVIE":return p;default:return e}}}),h=a(51);function f(e){return{type:"RECEIVED_TOKEN",payload:{token:e}}}function g(e){return{type:"RECEIVED_MOVIES",payload:{movies:e}}}function O(){return{type:"CLEARED_SEARCH_RESULTS"}}var y=a(28),b=a.n(y),_={invoke:function(e,t,a){b.a.set(e,JSON.stringify(t),a)},retrieve:function(e){var t=b.a.get(e);return void 0!==t&&JSON.parse(t)},revoke:function(e){b.a.remove(e)}},C=a(1),N=a.n(C);function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(h.a)({api_key:"1e859dc9f92ec822aa44af583dfc67fc"},t);return"https://api.themoviedb.org/3/"+e+"?"+Object.keys(a).map((function(e){return e+"="+a[e]})).join("&")}function T(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=_.retrieve("TMDb"),r=n.request_token;return{url:M(t,a),headers:{Authorization:"Bearer "+r,"Content-Type":"application/json;charset=utf-8"},method:"GET",category:e}}var k=Object(m.combineCycles)((function(e){var t=_.retrieve("TMDb");if(t)return{ACTION:e.ACTION.filter((function(e){return"REQUESTED_TOKEN"===e.type})).map((function(e){return f(t.request_token)}))};var a=e.ACTION.filter((function(e){return"REQUESTED_TOKEN"===e.type})),n=a.map((function(e){return{url:M("authentication/token/new",{api_key:"1e859dc9f92ec822aa44af583dfc67fc"}),category:"token"}})),r=e.HTTP.select("token").flatten();return{ACTION:N.a.combine(r,a).map((function(e){var t=e[0].body;return _.invoke("TMDb",t,{expires:1}),f(t.request_token)})),HTTP:n}}),(function(e){var t={"release_date.gte":"2019-01-01","release_date.lte":"2020-01-01",sort_by:"popularity.desc"},a=e.ACTION.filter((function(e){return"RECEIVED_TOKEN"===e.type})),n=a.map((function(e){return T("popular","discover/movie",t)})),r=e.HTTP.select("popular").flatten();return{ACTION:N.a.combine(r,a).map((function(e){return{type:"RECEIVED_POPULAR_MOVIES",payload:{movies:e[0].body.results}}})),HTTP:n}}),(function(e){var t=e.ACTION.filter((function(e){return"RECEIVED_TOKEN"===e.type})),a=t.map((function(e){return T("upcoming","movie/upcoming")})),n=e.HTTP.select("upcoming").flatten();return{ACTION:N.a.combine(n,t).map((function(e){return{type:"RECEIVED_UPCOMING_MOVIES",payload:{movies:e[0].body.results}}})),HTTP:a}}),(function(e){return{ACTION:e.ACTION.filter((function(e){return"SEARCH_MOVIES"===e.type})).filter((function(e){return!e.payload.query})).map(O)}}),(function(e){var t=e.ACTION.filter((function(e){return"SEARCH_MOVIES"===e.type})).map((function(e){return e.payload.query})).filter((function(e){return!!e})).map((function(t){return e.Time.periodic(800).take(1).mapTo(t).endWhen(e.ACTION.filter((function(e){return"CLEARED_SEARCH_RESULTS"===e.type})))})).flatten().map((function(e){return T("search","search/movie",{query:e})}));return{ACTION:e.HTTP.select("search").flatten().map((function(e){return e.body.results})).map(g),HTTP:t}}),(function(e){var t=e.ACTION.filter((function(e){return"SELECT_MOVIE"===e.type})),a=t.map((function(e){return T("movie_details","movie/"+e.payload.movie.id,{append_to_response:"videos,with_cast"})})),n=e.HTTP.select("movie_details").flatten();return{ACTION:N.a.combine(n,t).map((function(e){return{type:"RECEIVED_MOVIE",payload:{movie:e[0].body}}})),HTTP:a}})),S=a(50),I=a(49),D=a(48);a(87);var w=a(46),R=a.n(w);function j(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg"},r.a.createElement("a",{href:"#",className:"navbar-brand"},"Navbar"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(i.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/now-playing"},"Now Playing")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/"},"Popular"))))))}a(89);var A=function(e){var t=e.children;return r.a.createElement("div",{className:"App"},r.a.createElement(j,null),t,r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:R.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"Edit ",r.a.createElement("code",null,"src/App.tsx")," and save to reload."),r.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")))},V=a(11),L=a(12),P=a(10),U=a(15),H=a(14),q=a(47),x=function(e){Object(U.a)(a,e);var t=Object(H.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).el=void 0,n.MODAL_NODE=void 0,n.handleDeselectMovie=n.handleDeselectMovie.bind(Object(P.a)(n)),n.handleShowModal=n.handleShowModal.bind(Object(P.a)(n)),n.handleChildClick=n.handleChildClick.bind(Object(P.a)(n)),n.MODAL_NODE=document.getElementById("modal"),n.el=document.createElement("div"),n}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e;null===(e=this.MODAL_NODE)||void 0===e||e.addEventListener("click",this.handleDeselectMovie),this.el.addEventListener("click",this.handleChildClick),this.handleShowModal(),this.MODAL_NODE.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.MODAL_NODE)||void 0===e||e.removeEventListener("click",this.handleDeselectMovie),this.el.removeEventListener("click",this.handleChildClick),this.handleShowModal(),this.MODAL_NODE.removeChild(this.el)}},{key:"handleShowModal",value:function(){var e=this;["d-none","modal--open","show"].map((function(t){var a;return null===(a=e.MODAL_NODE)||void 0===a?void 0:a.classList.toggle(t)}))}},{key:"handleDeselectMovie",value:function(){this.props.deselectMovie()}},{key:"handleChildClick",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return Object(q.a)(this.props),o.a.createPortal(this.props.children,this.el)}}]),a}(r.a.Component),K=Object(c.b)((function(){return{}}),{deselectMovie:function(){return{type:"DESELECT_MOVIE"}}})(x);function Q(e){e.value;var t=e.defaultValue,a=e.onChange;return r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",defaultValue:t,onChange:function(e){return a(e.target.value)}})}function W(){return r.a.createElement("div",null,"loaging")}var z,G=function(e){Object(U.a)(a,e);var t=Object(H.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(P.a)(n)),n.state={query:""},n}return Object(L.a)(a,[{key:"handleChange",value:function(e){var t=this;this.setState({query:e},(function(){return t.props.searchMovies(e)}))}},{key:"render",value:function(){var e=this.state.query,t=this.props.searchResults,a=["search__results"];e||a.push("search__results--collapsed");var n=r.a.createElement("ul",null,e&&t.length<1?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(W,null))):null,t?t.map((function(e){var t="https://image.tmdb.org/t/p/w200"+e.poster_path;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1 p-0"},r.a.createElement("img",{className:"search__poster",src:t,alt:""})),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"card-body"},e.title))))))})):null);return r.a.createElement("div",{className:"search__container"},r.a.createElement(Q,{onChange:this.handleChange,defaultValue:e,value:""}),r.a.createElement("div",{className:a.join(" ")},n))}}]),a}(n.PureComponent),B=Object(c.b)((function(e){return{searchResults:e.searchResults}}),{searchMovies:function(e){return{type:"SEARCH_MOVIES",payload:{query:e}}}})(G);function F(e){var t=e.movie,a=e.size,n=e.onClick,l="https://image.tmdb.org/t/p/"+z[a]+"/"+t.poster_path,o="Cover Art for "+t.title;return r.a.createElement("article",{className:"movie-card movie-card--fade d-inline-block float-none mr-2",onClick:function(){return n(t)}},r.a.createElement("img",{className:"poster",src:l,alt:o}),t.id," | ",t.title)}function J(e){var t=e.collection,a=e.loading,n=e.onClick;return r.a.createElement("div",{style:{opacity:a?.3:1},className:"scaffold--horizontal-scroll"},r.a.createElement("div",{className:"row d-inline-block float-none"},t.map((function(e){return r.a.createElement(F,{key:e.id,movie:e,size:"sm",onClick:n})}))))}function X(e){var t=e.collection,a=e.loading,n=e.onClick;return r.a.createElement("div",{style:{opacity:a?.3:1},className:"scaffold scaffold--horizontal-scroll"},r.a.createElement("div",{className:"row d-inline-block float-none"},t.map((function(e){return r.a.createElement(F,{key:e.id,movie:e,size:"lg",onClick:n})}))))}!function(e){e.sm="w200",e.lg="w500"}(z||(z={}));var $=function(e){Object(U.a)(a,e);var t=Object(H.a)(a);function a(e){return Object(V.a)(this,a),t.call(this,e)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){document.documentElement.style.setProperty("--selected-movie-backdrop","url(https://image.tmdb.org/t/p/w500/"+this.props.backdrop_path+")")}},{key:"componentWillUnmount",value:function(){document.documentElement.style.setProperty("--selected-movie-backdrop","")}},{key:"render",value:function(){var e=this.props,t=e.poster_path,a=e.genres,n=e.overview,l="https://image.tmdb.org/t/p/w300/"+t,o="Cover Art for "+t,c=a?a.map((function(e){return r.a.createElement("span",{key:e.id,className:"badge badge-pill badge-light"},e.name)})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"modal__container"},r.a.createElement("img",{className:"poster poster--small",src:l,alt:o}),r.a.createElement("article",{className:"modal__hero"},r.a.createElement("h2",{className:"title"},this.props.title)),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row modal__row"},r.a.createElement("article",{className:"col align-self-end"},c),r.a.createElement("article",{className:"col-7"},r.a.createElement("p",null,n))))))}}]),a}(n.Component),Y=function(e){Object(U.a)(a,e);var t=Object(H.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).handleMovieSelect=n.handleMovieSelect.bind(Object(P.a)(n)),n.handleSearchChange=n.handleSearchChange.bind(Object(P.a)(n)),e.requestToken(),n}return Object(L.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.query!==e.query&&this.handleSearchChange(e.query)}},{key:"handleMovieSelect",value:function(e){this.props.selectMovie(e)}},{key:"handleSearchChange",value:function(e){this.props.searchMovies(e)}},{key:"render",value:function(){var e=this.props,t=e.upcomingResults,a=e.upcomingLoading,n=e.popularResults,l=e.popularMoviesLoading,o=e.showModal,c=e.selectedMovie,i=o?r.a.createElement(K,null,r.a.createElement($,c)):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"jumbotron mb-5"},r.a.createElement(B,null)),r.a.createElement("section",{className:"container mb-5"},r.a.createElement("h4",{className:"section__heading"}," Upcoming Movies"),r.a.createElement(J,{collection:t,loading:a,onClick:this.handleMovieSelect})),r.a.createElement("section",{className:"container"},r.a.createElement("h4",{className:"section__heading"},"popular movies"),r.a.createElement(X,{collection:n,loading:l,onClick:this.handleMovieSelect})),i)}}]),a}(n.Component),Z=Object(c.b)((function(e){return{upcomingResults:e.upcomingMovies,upcomingLoading:e.upcomingLoading,popularResults:e.popularMovies,popularMoviesLoading:e.popularMoviesLoading,showModal:e.showMovie,selectedMovie:e.selectMovie}}),{requestToken:function(){return{type:"REQUESTED_TOKEN"}},selectMovie:function(e){return{type:"SELECT_MOVIE",payload:{movie:e}}}})(Y),ee=function(e){Object(U.a)(a,e);var t=Object(H.a)(a);function a(e){return Object(V.a)(this,a),t.call(this,e)}return Object(L.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"container mb-5"},r.a.createElement("h4",{className:"section__heading"},"Now Playing"),r.a.createElement("div",null,"normal grid view")))}}]),a}(n.Component),te=Object(c.b)((function(){return{}}),{})(ee);function ae(){return r.a.createElement("div",null,"Page Not Found. Style Me me fool")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=function(){var e=Object(m.createCycleMiddleware)(),t=e.makeActionDriver,a=e.makeStateDriver,n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,r=[e],l=[u.a.apply(void 0,r)],o=Object(u.e)(v,n.apply(void 0,l));return Object(S.a)(k,{ACTION:t(),STATE:a(),Time:D.a,HTTP:Object(I.a)()}),o}(),re=document.getElementById("root");o.a.render(r.a.createElement(c.a,{store:ne},r.a.createElement(i.a,null,r.a.createElement(A,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"react-cyclejs/"},r.a.createElement(Z,null)),r.a.createElement(s.a,{exact:!0,path:"/now-playing"},r.a.createElement(te,null)),r.a.createElement(s.a,{path:"*"},r.a.createElement(ae,null)))))),re),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.a0e41615.chunk.js.map